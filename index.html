<!DOCTYPE html>
<!-- Since I'm used to writing en-US, I'll probably make mistakes in this document. Oh well. -->
<html lang="en-GB">

<head>
	<!--
  This file is UTF-8 with BOM (Byte Order Mark) - If you're using a decent editor, you can also see this in the status bar (at the bottom of the window) - 
  This means that the meta tag with charset=utf8 isn't needed.
  You could also set Content-Type in the packet header (that's something you should set in your server software)
  You can use http://validator.w3.org/i18n-checker/ to see if your header encoding to UTF-8
  For more information: https://www.w3.org/International/questions/qa-html-encoding-declarations#nonutf8
  -->
	<!-- <meta charset="utf-8" /> -->
	<!-- The title of the tab -->
	<title>Thaumatorium</title>
	<!-- <base href="https://thaumatorium.com/" /> -->
	<base href="/" />
	<!-- This description should show up in Google results -->
	<meta name=description content="Where the Magic happens" />
	<!-- Theme color for Android/iOS -->
	<meta name=theme-color content=#800 />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- manifest.json is currently only supported by Chromium based browsers, as per https://www.caniuse.com/#feat=web-app-manifest -->
	<link rel=manifest href=/manifest.json />
	<link rel=icon href=/images/favicon.svg />
	<link async rel=stylesheet href=styles/layout.css />
	<link async rel=stylesheet href=styles/header.css />
	<link async rel=stylesheet href=styles/nav.css />
	<link async rel=stylesheet href=styles/main.css />
	<link async rel=stylesheet href=styles/footer.css />
</head>

<body>
	<header id=banner>
		<a href="/">
			<img loading=lazy height=111 width=111 src="/images/Thaumatorium.svg"
				alt="main logo consisting of a checkerboard pattern" />
		</a>
		<div class=title>The Thaumatorium:</div>
		<div class=subtitle>Where the magic happens</div>
		<p><sub>Last updated: <time>2020-05-09</time></sub></p>
		<p><sup>Previous update: <time>2020-05-02</time></sup></p>
	</header>

	<nav>
		<!-- `this` refers to the anchor element. `hash` refers to the `#xxxx` of the `href` attribute -->
		<!-- You can't use `this.href`, because that returns the full URL and we only want the hash -->
		<a onclick=goto(this.hash) href>Frontpage</a>
		<a onclick=goto(this.hash) href=#articles>Articles</a>
		<a onclick=goto(this.hash) href=#projects>Projects</a>
		<a onclick=goto(this.hash) href=#experimentations>Experimentations</a>
		<a onclick=goto(this.hash) href=#todo>TODO</a>
		<a onclick=goto(this.hash) href=#about>About</a>
	</nav>

	<main></main>
	<script id=dynamic-script type="module"></script>
	<footer>
		<div class="copyright">
			&copy;<a href="https://www.youtube.com/watch?v=czgOWmtGVGs" style="text-decoration: none; color: #800;">12019</a>
			&ndash; <a href="http://updateyourfooter.com/" style="text-decoration: none; color: #800;">
				<script>
					document.write(new Date().getFullYear() + 10000);
				</script>
			</a>, <abbr
				title="Copyright is implicit, almost anywhere in the world! If you want to know more, wikipedia 'Berne Convention'"
				style="text-decoration: none; color: #800;">Thaumatorium</abbr>

		</div>
		<!-- Sssh - don't tell anyone! -->
		<a class="secret" onclick=specialGoto(event)
			style="text-decoration: none; color:#800; cursor: default;font-family: sans-serif; font-size: small;">&#960;</a>
	</footer>

	<script>
		// Previously, every article and page existed in index.html, which made this file 256 lines big. As of now, it's 109
		/**
		 * 
		 */
		const goto = (hash, hasScript = false) => {
			// Stick in a hash, get out the page's path
			const hashToPageMap = {
				"": { path: "/pages/frontpage.html", js: false },
				"#frontpage": { path: "/pages/frontpage.html", js: false },
				"#projects": { path: "/pages/projects.html", js: false },
				"#praetorianpi": { path: "/pages/praetorianpi.html", js: false },
				"#experimentations": { path: "/pages/experimentations.html", js: false },
				"#todo": { path: "/pages/todo.html", js: false },
				"#about": { path: "/pages/about.html", js: false },
				"#articles": { path: "/pages/articles.html", js: false },
				// articles
				"#example": { path: "/articles/example.html", js: false },
				"#blog": { path: "/articles/blog.html", js: false },
				// projects
				"#starfield": { path: "/projects/starfield.html", js: true },
				"#mstg": { path: "/projects/mockingspongebob.html", js: false },
				"#rot13": { path: "/projects/rot13.html", js: false },
			}
			let data = hashToPageMap[hash];
			fetch(data.path).then(response => {
				return response.text();
			}).then(html => {
				const el = document.querySelector("body>main");
				el.innerHTML = html;
				if (data.js) {
					let el = document.getElementById("dynamic-script");
					let module = `${data.path.split(".")[0]}.mjs`;
					el.setAttribute("src", module);
				}
			}).catch(err => {
				console.warn('Something went wrong.', err);
			});
		}

		const specialGoto = (event) => {
			if (event.ctrlKey && event.shiftKey) {
				window.location = "#PraetorianPi";
				goto("/pages/praetorianpi.html")
			}
		}

		goto(window.location.hash)
	</script>
</body>

</html>