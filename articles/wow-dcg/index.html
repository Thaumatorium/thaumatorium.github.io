<!doctype html>
<html lang="en-GB">
	<head prefix="og: http://ogp.me/ns#">
		<meta charset="utf-8" />
		<title>World of Warcraft - Directed Cyclic Graph | The Thaumatorium</title>
		<meta name="description" content="" />
		<link rel="canonical" href="https://thaumatorium.com/" />
		<meta name="theme-color" content="#800" />
		<link rel="apple-touch-icon" href="/images/icons-192.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="webmanifest" href="/manifest.json" />
		<link rel="icon" href="/images/favicon.svg" />
		<link rel="stylesheet" href="/styles/main.css?v=3" />
		<link rel="stylesheet" href="/styles/projects.css?v=3" />
		<meta property="og:url" content="https://thaumatorium.com/" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="World of Warcraft - Directed Cyclic Graph" />
		<meta property="og:description" content="" />
		<meta property="og:image" content="https://thaumatorium.com/images/opengraph-cover.png?v=1" />
		<meta property="og:image:width" content="1280" />
		<meta property="og:image:height" content="668" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@NostraDavid2" />
		<meta name="twitter:creator" content="@NostraDavid2" />
		<meta name="twitter:title" content="World of Warcraft - Directed Cyclic Graph" />
		<meta name="twitter:description" content="" />
		<meta name="twitter:image" content="https://thaumatorium.com/images/opengraph-cover.png?v=1" />
		<meta name="twitter:image:width" content="1280" />
		<meta name="twitter:image:height" content="668" />
	</head>
	<body>
		<header>
			<div class="title">The Thaumatorium:</div>
			<div class="subtitle">Where the magic happens</div>
		</header>
		<nav>
			<h5 style="display: none">Main nav menu</h5>
			<ul>
				<li><a href="/">Frontpage</a><span> - </span></li>
				<li><a href="/articles">Articles</a><span> - </span></li>
				<li><a href="/projects">Projects</a><span> - </span></li>
				<li><a href="/warcraft-credits">Warcraft Credits</a><span> - </span></li>
				<li><a href="/random-video">Random video</a><span> - </span></li>
				<li><a href="/epoch">Epoch</a><span> - </span></li>
				<li><a href="/knowledge-base">Knowledge Base</a><span> - </span></li>
				<li><a href="/about">About</a></li>
			</ul>
		</nav>
		<main>
			<h1>World of Warcraft - Directed Cyclic Graph</h1>
			<!doctype html>
			<meta charset="utf-8" />
			<title>WoW (Vanilla) – Directed Cyclic Graph</title>
			<style>
				html,
				body {
					margin: 0;
					height: 100%;
					background: #0b0f14;
					color: #e6edf3;
					font:
						14px/1.3 system-ui,
						sans-serif;
				}
				#chart {
					width: 100vw;
					height: 100vh;
				}
				.link {
					stroke: #9fb3c8;
					stroke-opacity: 0.7;
					fill: none;
				}
				.node circle {
					stroke: #0b0f14;
					stroke-width: 2px;
				}
				.label {
					fill: #e6edf3;
					font-size: 12px;
					pointer-events: none;
					text-shadow: 0 1px 2px #000;
				}
				.legend {
					position: fixed;
					left: 12px;
					top: 12px;
					background: #0e141b;
					border: 1px solid #1f2a36;
					padding: 8px 10px;
					border-radius: 8px;
				}
				.legend .sw {
					display: inline-block;
					width: 10px;
					height: 10px;
					border-radius: 50%;
					margin-right: 6px;
					vertical-align: -1px;
				}
				.tooltip {
					position: fixed;
					pointer-events: none;
					background: #11161d;
					border: 1px solid #2a3a4d;
					color: #cfe3ff;
					padding: 6px 8px;
					border-radius: 6px;
					font-size: 12px;
					box-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
				}
			</style>
			<div id="chart"></div>
			<div class="legend">
				<div><span class="sw" style="background: #7ccfff"></span>Leveling (Q, C, L, XP)</div>
				<div><span class="sw" style="background: #ffd166"></span>Economy (P, G)</div>
				<div><span class="sw" style="background: #c792ea"></span>Social/Raid (S, R)</div>
				<div><span class="sw" style="background: #7bd88f"></span>Exploration (E)</div>
			</div>
			<script type="module">
				import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";
				// --- Data (nodes and weighted, directed edges)
				const nodes = [
					{ id: "Q", name: "Questing", group: "level", desc: "XP, gold, rep, basic loot" },
					{ id: "C", name: "Combat", group: "level", desc: "Kills, skill use, drops" },
					{ id: "L", name: "Loot & Gear", group: "level", desc: "Power growth, repairs, upgrades" },
					{ id: "XP", name: "Experience / Leveling", group: "level", desc: "Levels, abilities, zone unlocks" },
					{ id: "P", name: "Professions / Economy", group: "econ", desc: "Gathering, crafting, auction" },
					{ id: "G", name: "Gold", group: "econ", desc: "Repairs, consumables, mounts" },
					{ id: "S", name: "Social / Guild", group: "social", desc: "Grouping, trading, coordination" },
					{ id: "R", name: "Raiding / Endgame", group: "social", desc: "Co-op bosses, prestige gear" },
					{ id: "E", name: "Exploration / World", group: "explore", desc: "Travel, discovery, nodes, quests" },
				];
				const links = [
					{ source: "Q", target: "XP", type: "positive", weight: 0.9, note: "Quests grant XP" },
					{ source: "Q", target: "L", type: "positive", weight: 0.5, note: "Quest rewards" },
					{ source: "C", target: "L", type: "positive", weight: 0.8, note: "Mob/boss drops" },
					{ source: "L", target: "C", type: "positive", weight: 0.8, note: "Gear improves combat" },
					{ source: "XP", target: "C", type: "positive", weight: 0.6, note: "New abilities" },
					{ source: "XP", target: "Q", type: "positive", weight: 0.6, note: "Unlocks zones" },
					{ source: "P", target: "G", type: "positive", weight: 0.9, note: "Sell goods" },
					{ source: "G", target: "P", type: "positive", weight: 0.7, note: "Buy mats/recipes" },
					{ source: "G", target: "L", type: "positive", weight: 0.5, note: "Buy gear/repairs" },
					{ source: "S", target: "R", type: "positive", weight: 0.9, note: "Guild enables raids" },
					{ source: "R", target: "L", type: "positive", weight: 0.9, note: "Best-in-slot gear" },
					{ source: "L", target: "R", type: "positive", weight: 0.9, note: "Gear boosts raid success" },
					{ source: "E", target: "Q", type: "positive", weight: 0.4, note: "Find quests" },
					{ source: "E", target: "P", type: "positive", weight: 0.3, note: "Discover resource nodes" },
					{ source: "R", target: "S", type: "positive", weight: 0.8, note: "Raids strengthen guilds" },
				];
				// --- Visuals
				const color = d3.scaleOrdinal().domain(["level", "econ", "social", "explore"]).range(["#7ccfff", "#ffd166", "#c792ea", "#7bd88f"]);
				const width = document.body.clientWidth;
				const height = document.body.clientHeight;
				const svg = d3.select("#chart").append("svg").attr("viewBox", [0, 0, width, height]).style("display", "block");
				const zoom = d3
					.zoom()
					.scaleExtent([0.35, 3])
					.on("zoom", (event) => g.attr("transform", event.transform));
				svg.call(zoom);
				const defs = svg.append("defs");
				defs.append("marker")
					.attr("id", "arrow")
					.attr("viewBox", "0 -5 10 10")
					.attr("refX", 20) // keep arrowhead visible above target node
					.attr("refY", 0)
					.attr("markerWidth", 6)
					.attr("markerHeight", 6)
					.attr("orient", "auto")
					.append("path")
					.attr("d", "M0,-5L10,0L0,5")
					.attr("fill", "#9fb3c8")
					.attr("opacity", 0.9);
				const g = svg.append("g");
				// --- Scales
				const strokeWidth = d3.scaleLinear().domain([0.3, 0.9]).range([0.5, 4]);
				// --- Links
				const link = g
					.append("g")
					.attr("stroke-linecap", "round")
					.selectAll("path")
					.data(links)
					.join("path")
					.attr("class", "link")
					.attr("fill", "none")
					.attr("marker-end", "url(#arrow)")
					.attr("stroke-width", (d) => strokeWidth(d.weight));
				// --- Nodes
				const node = g.append("g").selectAll("g").data(nodes).join("g").attr("class", "node").call(drag(simulation()));
				node.append("circle")
					.attr("r", 18)
					.attr("fill", (d) => color(d.group));
				node.append("text")
					.attr("class", "label")
					.attr("text-anchor", "middle")
					.attr("dy", ".35em")
					.text((d) => d.id);
				// Long labels below
				node.append("text")
					.attr("class", "label")
					.attr("text-anchor", "middle")
					.attr("dy", "1.9em")
					.attr("font-size", "10px")
					.attr("fill", "#a9b8c9")
					.text((d) => d.name);
				// --- Tooltips
				const tip = d3.select("body").append("div").attr("class", "tooltip").style("opacity", 0);
				node.on("mousemove", (event, d) => {
					tip.style("opacity", 1)
						.html(`<b>${d.name}</b><br>${d.desc}`)
						.style("left", event.clientX + 12 + "px")
						.style("top", event.clientY + 12 + "px");
				}).on("mouseleave", () => tip.style("opacity", 0));
				link.on("mousemove", (event, d) => {
					tip.style("opacity", 1)
						.html(`<b>${idToName(d.source)} → ${idToName(d.target)}</b><br>${d.note}<br>weight ${d.weight}`)
						.style("left", event.clientX + 12 + "px")
						.style("top", event.clientY + 12 + "px");
				}).on("mouseleave", () => tip.style("opacity", 0));
				// --- Simulation
				function simulation() {
					const id = (d) => d.id;
					const sim = d3
						.forceSimulation(nodes)
						.force(
							"link",
							d3
								.forceLink(links)
								.id(id)
								.distance((d) => 80 + (1 - d.weight) * 140)
								.strength(0.5)
						)
						.force("charge", d3.forceManyBody().strength(-500))
						.force("center", d3.forceCenter(width / 2, height / 2))
						.force("collision", d3.forceCollide().radius(34))
						.on("tick", ticked);
					return sim;
				}
				function ticked() {
					// Straight links between nodes
					link.attr("d", (d) => `M${d.source.x},${d.source.y}L${d.target.x},${d.target.y}`);
					node.attr("transform", (d) => `translate(${d.x},${d.y})`);
				}
				function drag(sim) {
					function dragstarted(event, d) {
						if (!event.active) sim.alphaTarget(0.2).restart();
						d.fx = d.x;
						d.fy = d.y;
					}
					function dragged(event, d) {
						d.fx = event.x;
						d.fy = event.y;
					}
					function dragended(event, d) {
						if (!event.active) sim.alphaTarget(0);
					}
					return d3.drag().on("start", dragstarted).on("drag", dragged).on("end", dragended);
				}
				function idToName(id) {
					return nodes.find((n) => n.id === (id.id ?? id))?.name ?? id;
				}
				// --- Initial zoom to fit
				const fit = () => {
					const bounds = g.node().getBBox();
					const fullWidth = width,
						fullHeight = height;
					const w = bounds.width,
						h = bounds.height;
					if (!w || !h) return;
					const midX = bounds.x + w / 2,
						midY = bounds.y + h / 2;
					const scale = 0.9 / Math.max(w / fullWidth, h / fullHeight);
					const transform = d3.zoomIdentity
						.translate(fullWidth / 2, fullHeight / 2)
						.scale(scale)
						.translate(-midX, -midY);
					svg.transition().duration(500).call(zoom.transform, transform);
				};
				setTimeout(fit, 900);
			</script>
			<p>No articles found in this section.</p>
		</main>
		<footer>
			<div class="copyright">
				©<a href="https://www.youtube.com/watch?v=czgOWmtGVGs" style="text-decoration: none; color: #800">12019</a> – <a id="target-year" href="http://updateyourfooter.com/" style="text-decoration: none; color: #800">12025</a>,
				<abbr title="Copyright is implicit, almost anywhere in the world! If you want to know more, wikipedia 'Berne Convention'" style="text-decoration: none; color: #800">Thaumatorium</abbr>
				<p>
					<sub>Last updated: <time id="updated">2025-11-01</time></sub>
				</p>
			</div>
			<nav id="profiles"></nav>
			<a class="secret" onclick="specialGoto(event)">π</a>
			<script>
				const specialGoto = (event) => {
					if (event.ctrlKey && event.shiftKey) window.location.href = "/praetorianpi/";
				};
			</script>
		</footer>
	</body>
</html>
